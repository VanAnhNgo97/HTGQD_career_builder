(function(){define("views.work_location_map",["jquery","jquery.unveil"],function(a){var b;return b=function(){function b(b){this.options={apiKey:"",mapApi:"googleMaps",mapUrlPrefix:"",offices:[],officeIds:[],officesId:"",locationContainerSelector:".location-container",locationMapContainerSelector:".location-map-container",mapImageWidth:600,mapImageHeight:450},a.extend(!0,this.options,b),h.call(this)}var c,d,e,f,g,h,i;return d=function(a,b){var c,d,f,g,h,i,j,k,l,m;if(0===b.length)return null;if(d=e.call(this,b),"googleMaps"===this.options.mapApi)for(f="//maps.googleapis.com/maps/api/staticmap?size="+this.options.mapImageWidth+"x"+this.options.mapImageHeight+"&sensor=false",h=0,k=d.length;k>h;h++)c=d[h],f=f+"&markers=color:red%7C"+c.latitude+","+c.longitude;else if("bingMaps"===this.options.mapApi)for(f="//dev.virtualearth.net/REST/v1/Imagery/Map/Road?mapSize="+this.options.mapImageWidth+","+this.options.mapImageHeight,i=0,l=d.length;l>i;i++)c=d[i],f=f+"&pp="+c.latitude+","+c.longitude+";64;";else if("OSM"===this.options.mapApi)for(f=this.options.mapUrlPrefix+"/maps/api/staticmap?size="+this.options.mapImageWidth+"x"+this.options.mapImageHeight+"&sensor=false",j=0,m=d.length;m>j;j++)c=d[j],f=f+"&markers=color:red%7C"+c.latitude+","+c.longitude;return this.options.apiKey&&(f=f+"&key="+this.options.apiKey),g=f+"&scale=2",{src:f,srcRetina:g}},e=function(a){var b,c,d,e,f,g,h,i;for(d=[],i=this.options.offices,e=0,g=i.length;g>e;e++)for(b=i[e],f=0,h=a.length;h>f;f++)if(c=a[f],b.id===c){d.push(b);break}return d},f=function(b){var c;return c=[],a('input:checkbox[name$="'+this.options.officesId+'"]',b).each(function(b,d){return a(d).is(":checked")?c.push(d.value):void 0}),c},i=function(b,c){var e,f,g;return f=a(this.options.locationMapContainerSelector,b),e=f.find("img"),0===e.length&&(e=a("<img>"),f.append(e)),0===c.length?void e.attr("src","").hide():(g=d.call(this,b,c),void("OSM"===this.options.mapApi?e.attr("src",g.src).attr("width",this.options.mapImageWidth).attr("height",this.options.mapImageHeight).attr("class","img-responsive").show():e.attr("data-src",g.src).attr("data-src-retina",g.srcRetina).attr("width",this.options.mapImageWidth).attr("height",this.options.mapImageHeight).attr("class","img-responsive").unveil().show()))},g=function(b,d,e){return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){return a(d).attr("href","https://www.google.com/maps/dir/"+c.coords.latitude+","+c.coords.longitude+"/"+b)},function(f){return a(d).attr("href",c.call(this,e,b))}):a(d).attr("href",c.call(this,e,b))},c=function(a,b){return"https://www.google.com/maps/place/"+b+"/@"+a.k+","+a.D+",15z"},h=function(){a("#"+this.options.officesId).on("change",function(b){return function(c){var d,e;d=a(c.target).parents(b.options.locationContainerSelector),e=f.call(b,d),i.call(b,d,e)}}(this)),a(function(b){return function(){a(b.options.locationContainerSelector).each(function(c,d){var e;e=0!==b.options.officeIds.length?b.options.officeIds:f.call(b,a(d)),i.call(b,a(d),e)})}}(this))},b}()})}).call(this);